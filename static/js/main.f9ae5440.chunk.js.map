{"version":3,"sources":["components/Modal/Modal.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.module.css","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","services/ImageApi.jsx","images/404-not-found.jpg","components/Button/Button.jsx","components/Modal/Modal.jsx","components/ImageGallery/ImageGallery.jsx","App.js","index.js","components/ImageGallery/ImageGallery.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css"],"names":["module","exports","Searchbar","onSubmit","useState","searchQuery","setSearchQuery","className","s","SearchForm","e","preventDefault","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","target","value","ImageGalleryItem","src","alt","onClick","id","ImageGalleryItemImage","ImageApi","page","url","fetch","Button","Modal","onClose","onLeft","onRight","tags","useEffect","window","addEventListener","handleKeyDown","removeEventListener","code","Overlay","event","currentTarget","ImageGallery","query","gallery","setGallery","status","setStatus","setPage","showModal","setShowModal","modalImgSrc","setModalImgSrc","currentImgIdx","setCurrentImgIdx","largeImageURL","setLargeImageURL","setAlt","then","response","ok","json","Promise","reject","Error","hits","length","newHits","match","prev","catch","error","console","log","arr","newArr","forEach","push","toggleModal","modalOpen","map","item","idx","color","height","width","timeout","style","textAlign","paddingTop","defaultImage","wrapper","scrollTo","top","document","documentElement","scrollHeight","behavior","App","data","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f9ae5440.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1Gxlb\",\"Modal\":\"Modal_Modal__1Q0R7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__w1yoM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1XxYk\",\"SearchForm\":\"Searchbar_SearchForm__2AmOk\",\"SearchFormButton\":\"Searchbar_SearchFormButton__Ow2ph\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__2k6GV\",\"SearchFormInput\":\"Searchbar_SearchFormInput__ue7c-\"};","import { useState } from \"react\";\r\nimport s from \"./Searchbar.module.css\";\r\n\r\nexport default function Searchbar({ onSubmit }) {\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n    const handleInputChange = (e) => {\r\n        setSearchQuery(e.target.value);\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        onSubmit(searchQuery);\r\n        setSearchQuery(\"\");\r\n    };\r\n\r\n    return (\r\n        <header className={s.Searchbar}>\r\n            <form className={s.SearchForm} onSubmit={handleSubmit}>\r\n                <button type=\"submit\" className={s.SearchFormButton}>\r\n                    <span className={s.SearchFormButtonLabel}>Search</span>\r\n                </button>\r\n\r\n                <input\r\n                    className={s.SearchFormInput}\r\n                    type=\"text\"\r\n                    autoComplete=\"off\"\r\n                    autoFocus\r\n                    placeholder=\"Search images and photos\"\r\n                    onChange={handleInputChange}\r\n                    value={searchQuery}\r\n                />\r\n            </form>\r\n        </header>\r\n    );\r\n}","import s from \"./ImageGalleryItem.module.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function ImageGalleryItem({ src, alt, onClick, id }) {\r\n    return (\r\n        <li\r\n            className={s.ImageGalleryItem}\r\n            onClick={() => {\r\n                onClick(src, alt, id);\r\n            }}\r\n        >\r\n            <img src={src} alt={alt} className={s.ImageGalleryItemImage} id={id} />\r\n        </li>\r\n    );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n    src: PropTypes.string,\r\n    alt: PropTypes.string,\r\n    onClick: PropTypes.func,\r\n    dataId: PropTypes.number,\r\n};","export default function ImageApi(searchQuery, page) {\r\n    const KEY = \"22566981-b2c0de401259c0633e20b55b4\";\r\n    const BASE_URL = \"https://pixabay.com/api/\";\r\n    const url = `${BASE_URL}?q=${searchQuery}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`;\r\n\r\n    return fetch(url);\r\n}","export default __webpack_public_path__ + \"static/media/404-not-found.8fe7be60.jpg\";","import s from \"./Button.module.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function Button({ onClick }) {\r\n    return (\r\n        <button type=\"button\" className={s.Button} onClick={onClick}>\r\n            Load more\r\n        </button>\r\n    );\r\n}\r\n\r\nButton.propTypes = {\r\n    onClick: PropTypes.func,\r\n};","import { useEffect } from \"react\";\r\nimport s from \"./Modal.module.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function Modal({ onClose, onLeft, onRight, src, tags }) {\r\n    useEffect(() => {\r\n        window.addEventListener(\"keydown\", handleKeyDown);\r\n        // console.log(\"add handleKeyDown \" + Date.now());\r\n        return () => {\r\n            window.removeEventListener(\"keydown\", handleKeyDown);\r\n            // console.log(\"remove handleKeyDown \" + Date.now());\r\n        };\r\n    });\r\n\r\n    const handleKeyDown = (e) => {\r\n        if (e.code === \"Escape\") {\r\n            onClose();\r\n        } else if (e.code === \"ArrowLeft\") {\r\n            onLeft();\r\n        } else if (e.code === \"ArrowRight\") {\r\n            onRight();\r\n        }\r\n    };\r\n\r\n    const handleOverlayClick = (event) => {\r\n        if (event.currentTarget === event.target) {\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={s.Overlay} onClick={handleOverlayClick}>\r\n            <div>\r\n                <img src={src} alt={tags} className={s.Modal} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nModal.propTypes = {\r\n    src: PropTypes.string,\r\n    tags: PropTypes.string,\r\n};","import { useState, useEffect } from \"react\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\nimport s from \"./ImageGallery.module.css\";\r\nimport ImageApi from \"../../services/ImageApi\";\r\nimport defaultImage from \"../../images/404-not-found.jpg\";\r\nimport Button from \"../Button/Button\";\r\nimport Modal from \"../Modal/Modal\";\r\n\r\nexport default function ImageGallery({ query }) {\r\n    const [gallery, setGallery] = useState([]);\r\n    const [status, setStatus] = useState(\"idle\");\r\n    const [page, setPage] = useState(1);\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [searchQuery, setSearchQuery] = useState(null);\r\n    const [modalImgSrc, setModalImgSrc] = useState(\"\");\r\n    const [currentImgIdx, setCurrentImgIdx] = useState(\"\");\r\n    const [largeImageURL, setLargeImageURL] = useState(\"\");\r\n    const [alt, setAlt] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if (query !== \"initialState\") {\r\n            setStatus(\"pending\");\r\n            ImageApi(query)\r\n                .then((response) => {\r\n                    if (response.ok) {\r\n                        return response.json();\r\n                    }\r\n                    return Promise.reject(new Error(`no images on request`));\r\n                })\r\n                .then(({ hits }) => {\r\n                    if (hits.length === 0) {\r\n                        setStatus(\"rejected\");\r\n                    } else {\r\n                        const newHits = match(hits);\r\n                        setGallery(newHits);\r\n                        setStatus(\"resolved\");\r\n                        setPage((prev) => prev + 1);\r\n                        setSearchQuery(query);\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    setStatus(\"rejected\");\r\n                    console.log(error);\r\n                });\r\n        }\r\n    }, [query]);\r\n\r\n    const loadmore = () => {\r\n        ImageApi(searchQuery, page)\r\n            .then((response) => {\r\n                return response.json();\r\n            })\r\n            .then(({ hits }) => {\r\n                const newHits = match(hits);\r\n                setGallery((prev) => [...prev, ...newHits]);\r\n                setPage((prev) => prev + 1);\r\n            })\r\n            .then(() => {\r\n                window.scrollTo({\r\n                    top: document.documentElement.scrollHeight,\r\n                    behavior: \"smooth\",\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                setStatus(\"rejected\");\r\n                console.log(error);\r\n            });\r\n    };\r\n\r\n    const match = (arr) => {\r\n        const newArr = [];\r\n        arr.forEach(({ id, largeImageURL, tags }) => {\r\n            newArr.push({ id, largeImageURL, tags });\r\n        });\r\n        return newArr;\r\n    };\r\n\r\n    const toggleModal = () => {\r\n        setShowModal((prev) => !prev);\r\n        setModalImgSrc(\"\");\r\n    };\r\n\r\n    const decrementModal = () => {\r\n        if (currentImgIdx > 0) {\r\n            setModalImgSrc(gallery[currentImgIdx - 1].largeImageURL);\r\n            setCurrentImgIdx((prev) => prev - 1);\r\n        }\r\n    };\r\n\r\n    const incrementModal = () => {\r\n        if (currentImgIdx < gallery.length - 1) {\r\n            setModalImgSrc(gallery[currentImgIdx + 1].largeImageURL);\r\n            setCurrentImgIdx((prev) => prev + 1);\r\n        }\r\n    };\r\n\r\n    const modalOpen = (src, alt, id) => {\r\n        setLargeImageURL(src);\r\n        setAlt(alt);\r\n        toggleModal();\r\n        gallery.map((item, idx) => {\r\n            if (item.id === id) {\r\n                setCurrentImgIdx(idx);\r\n            }\r\n            return \"\";\r\n        });\r\n    };\r\n\r\n    if (status === \"idle\") {\r\n        return \"\";\r\n    }\r\n    if (status === \"pending\") {\r\n        return (\r\n            <Loader\r\n                type=\"Audio\"\r\n                color=\"#3f51b5\"\r\n                height={100}\r\n                width={100}\r\n                timeout={300000}\r\n                style={{ textAlign: \"center\", paddingTop: \"25px\" }}\r\n            />\r\n        );\r\n    }\r\n    if (status === \"rejected\") {\r\n        return (\r\n            <img\r\n                src={defaultImage}\r\n                alt={\"По вашему запросу ничего не найдено(\"}\r\n                className={s.defaultImage}\r\n            />\r\n        );\r\n    }\r\n    if (status === \"resolved\") {\r\n        return (\r\n            <div className={s.wrapper}>\r\n                {showModal && (\r\n                    <Modal\r\n                        onClose={toggleModal}\r\n                        onLeft={decrementModal}\r\n                        onRight={incrementModal}\r\n                        src={modalImgSrc || largeImageURL}\r\n                        tags={alt}\r\n                    />\r\n                )}\r\n                <ul className={s.ImageGallery}>\r\n                    {gallery.map(({ largeImageURL, tags, id }) => {\r\n                        return (\r\n                            <ImageGalleryItem\r\n                                src={largeImageURL}\r\n                                alt={tags}\r\n                                onClick={modalOpen}\r\n                                key={id}\r\n                                id={id}\r\n                            />\r\n                        );\r\n                    })}\r\n                </ul>\r\n                <Button onClick={loadmore} />\r\n            </div>\r\n        );\r\n    }\r\n}","import { useState } from \"react\";\nimport Searchbar from \"./components/Searchbar/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\n\nexport default function App() {\n  const [searchQuery, setSearchQuery] = useState(\"initialState\");\n\n  const sendQueryInState = (data) => {\n    setSearchQuery(data);\n  };\n\n  return (\n    <>\n      <Searchbar onSubmit={sendQueryInState} />\n      <ImageGallery query={searchQuery} />\n    </>\n  );\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"modern-normalize/modern-normalize.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n  );","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2KU5P\",\"defaultImage\":\"ImageGallery_defaultImage__3u9tp\",\"wrapper\":\"ImageGallery_wrapper__3bm37\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3WlmY\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1oe7Q\"};"],"sourceRoot":""}